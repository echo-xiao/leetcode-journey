# 1693. 所有奇数长度子数组的和

**难度**: Easy | **标签**: `Array` `Math` `Prefix Sum`

## 题目描述

<p>给你一个正整数数组&nbsp;<code>arr</code>&nbsp;，请你计算所有可能的奇数长度子数组的和。</p>

<p><strong>子数组</strong> 定义为原数组中的一个连续子序列。</p>

<p>请你返回 <code>arr</code>&nbsp;中 <strong>所有奇数长度子数组的和</strong> 。</p>

<p>&nbsp;</p>

<p><strong>示例 1：</strong></p>

<pre>
<strong>输入：</strong>arr = [1,4,2,5,3]
<strong>输出：</strong>58
<strong>解释：</strong>所有奇数长度子数组和它们的和为：
[1] = 1
[4] = 4
[2] = 2
[5] = 5
[3] = 3
[1,4,2] = 7
[4,2,5] = 11
[2,5,3] = 10
[1,4,2,5,3] = 15
我们将所有值求和得到 1 + 4 + 2 + 5 + 3 + 7 + 11 + 10 + 15 = 58</pre>

<p><strong>示例 2：</strong></p>

<pre>
<strong>输入：</strong>arr = [1,2]
<strong>输出：</strong>3
<strong>解释：</strong>总共只有 2 个长度为奇数的子数组，[1] 和 [2]。它们的和为 3 。</pre>

<p><strong>示例 3：</strong></p>

<pre>
<strong>输入：</strong>arr = [10,11,12]
<strong>输出：</strong>66
</pre>

<p>&nbsp;</p>

<p><strong>提示：</strong></p>

<ul>
	<li><code>1 &lt;= arr.length &lt;= 100</code></li>
	<li><code>1 &lt;= arr[i] &lt;= 1000</code></li>
</ul>

<p>&nbsp;</p>

<p><strong>进阶：</strong></p>

<p>你可以设计一个 O(n) 时间复杂度的算法解决此问题吗？</p>


---
## 解题思路与复盘

1. 一句话直击本质：计算所有奇数长度子数组的和可以通过前缀和数组或数学组合计数来高效实现。

2. 综合思路：
   - **前缀和方法**：通过构建前缀和数组，快速计算任意子数组的和，然后遍历所有可能的子数组，检查其长度是否为奇数。
   - **数学组合计数方法**：通过计算每个元素在奇数长度子数组中出现的次数，直接累加每个元素对结果的贡献。

3. 全量伪代码：
   - **前缀和方法**：
     ```
     初始化前缀和数组 curr，长度为 n+1，初始值为 0
     遍历数组 arr，构建前缀和数组 curr
     初始化结果 res 为 0
     双重循环遍历所有可能的子数组起始和结束位置
         计算子数组长度
         如果子数组长度为奇数
             计算子数组和并累加到 res
     返回 res
     ```
   - **数学组合计数方法**：
     ```
     初始化结果 res 为 0
     遍历数组 arr，获取每个元素的索引和值
         计算该元素左侧和右侧的元素个数
         计算该元素在所有奇数长度子数组中出现的次数
         将该元素对结果的贡献累加到 res
     返回 res
     ```

4. 复杂度：
   - **前缀和方法**：时间复杂度为 $O(n^2)$，空间复杂度为 $O(n)$。
   - **数学组合计数方法**：时间复杂度为 $O(n)$，空间复杂度为 $O(1)$。